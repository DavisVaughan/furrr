<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Alternative to automatic globals detection • furrr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="Alternative to automatic globals detection">
<meta property="og:description" content="furrr">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">furrr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/articles/carrier.html">Alternative to automatic globals detection</a>
    </li>
    <li>
      <a href="../../articles/articles/chunking.html">Chunking input</a>
    </li>
    <li>
      <a href="../../articles/articles/gotchas.html">Common gotchas</a>
    </li>
    <li>
      <a href="../../articles/articles/progress.html">Progress notifications with progressr</a>
    </li>
    <li>
      <a href="../../articles/articles/remote-connections.html">Remote connections</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/DavisVaughan/furrr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="carrier_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="carrier_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="carrier_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Alternative to automatic globals detection</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/DavisVaughan/furrr/blob/master/vignettes/articles/carrier.Rmd"><code>vignettes/articles/carrier.Rmd</code></a></small>
      <div class="hidden name"><code>carrier.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/DavisVaughan/furrr">furrr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-lib/carrier">carrier</a></span><span class="op">)</span></pre></div>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>When writing production code with furrr, you might not want to leave it up to automatic globals detection to ensure that everything is shipped off to the worker correctly. While it generally works well, there will always be edge cases with static code analysis that may cause it to either fail (very bad) or copy more objects over to the workers than is required (less bad, but still not great).</p>
<p>As an alternative, you can use the <a href="https://CRAN.R-project.org/package=carrier">carrier</a> package by Lionel Henry to manually isolate all of the dependencies required by your function. This ensures that the function’s environment contains <em>only</em> what you have requested, and nothing more. Combine this with <code><a href="../../reference/furrr_options.html">furrr_options(globals = FALSE)</a></code> to turn off automatic globals detection, and you should end up with a production worthy way to use furrr.</p>
</div>
<div id="crates" class="section level2">
<h2 class="hasAnchor">
<a href="#crates" class="anchor"></a>Crates</h2>
<p>The idea behind carrier is to package up a function and all of its dependencies into a <em>crate</em>. A crate is just another function, but with a specialized function environment that carries around only the dependencies required for it to run. To create a crate, directly wrap a call to <code>function()</code> with <code><a href="https://rdrr.io/pkg/carrier/man/crate.html">crate()</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="va">crt1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/carrier/man/crate.html">crate</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html">var</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>

<span class="fu">crt1</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] 4</span></pre></div>
<p>You can also specify the function to crate using the anonymous function shorthand with <code><a href="https://rdrr.io/r/base/tilde.html">~</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="va">crt1_anon</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/carrier/man/crate.html">crate</a></span><span class="op">(</span><span class="op">~</span><span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html">var</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span><span class="op">)</span>

<span class="fu">crt1_anon</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] 4</span></pre></div>
<p>You must manually namespace all package function calls with <code>pkg::</code>, as the crated function runs in an environment where only the base package has been loaded.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="va">crt2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/carrier/man/crate.html">crate</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/cor.html">var</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>

<span class="fu">crt2</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Error in var(x): could not find function "var"</span></pre></div>
<p>Any “outside” dependencies that you require must also be manually specified when creating the crate, otherwise it won’t be found.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="va">constant</span> <span class="op">&lt;-</span> <span class="fl">1.67</span>

<span class="va">crt3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/carrier/man/crate.html">crate</a></span><span class="op">(</span><span class="op">~</span> <span class="va">.x</span> <span class="op">+</span> <span class="va">constant</span><span class="op">)</span>

<span class="fu">crt3</span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>
<span class="co">#&gt; Error in crt3(2:5): object 'constant' not found</span></pre></div>
<p>You can specify these dependencies by either inlining them into the crate with <code>!!</code>, or by supplying them as name-value pairs to <code><a href="https://rdrr.io/pkg/carrier/man/crate.html">crate()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="va">crt4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/carrier/man/crate.html">crate</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">x</span> <span class="op">+</span> <span class="op">!</span><span class="op">!</span><span class="va">constant</span>
<span class="op">}</span><span class="op">)</span>

<span class="fu">crt4</span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>
<span class="co">#&gt; [1] 3.67 4.67 5.67 6.67</span></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="va">crt5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/carrier/man/crate.html">crate</a></span><span class="op">(</span>
  constant <span class="op">=</span> <span class="va">constant</span>,
  <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">x</span> <span class="op">+</span> <span class="va">constant</span>
  <span class="op">}</span>
<span class="op">)</span>

<span class="fu">crt5</span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>
<span class="co">#&gt; [1] 3.67 4.67 5.67 6.67</span></pre></div>
<p>Crates have a nice print method, allowing you to see the size of the crate and what has been captured:</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="va">crt5</span>
<span class="co">#&gt; Registered S3 method overwritten by 'pryr':</span>
<span class="co">#&gt;   method      from</span>
<span class="co">#&gt;   print.bytes Rcpp</span>
<span class="co">#&gt; &lt;crate&gt; 10.1 kB</span>
<span class="co">#&gt; * function: 9.53 kB</span>
<span class="co">#&gt; * `constant`: 56 B</span>
<span class="co">#&gt; function(x) {</span>
<span class="co">#&gt;     x + constant</span>
<span class="co">#&gt;   }</span></pre></div>
<p>One downside of inlining with <code>!!</code> is that it doesn’t show up as a separate element in the print method:</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="va">crt4</span>
<span class="co">#&gt; &lt;crate&gt; 9.61 kB</span>
<span class="co">#&gt; * function: 9.16 kB</span>
<span class="co">#&gt; function(x) {</span>
<span class="co">#&gt;   x + !!constant</span>
<span class="co">#&gt; }</span></pre></div>
<p>The last thing to know about crates is that it is generally required that you crate a new function. By “new”, I mean that the function cannot have already been created beforehand and assigned a name, because this prevents <code><a href="https://rdrr.io/pkg/carrier/man/crate.html">crate()</a></code> from assigning it the correct environment.</p>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="va">fn</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">x</span>
<span class="op">}</span>

<span class="fu"><a href="https://rdrr.io/pkg/carrier/man/crate.html">crate</a></span><span class="op">(</span><span class="va">fn</span><span class="op">)</span>
<span class="co">#&gt; Error: The function must be defined inside the `crate()` call</span></pre></div>
</div>
<div id="crates-and-furrr" class="section level2">
<h2 class="hasAnchor">
<a href="#crates-and-furrr" class="anchor"></a>Crates and furrr</h2>
<p>Using a crated function with furrr is just like using any other function, except you won’t need to rely on the automatic globals detection (unless you have globals in <code>.x</code> or <code>...</code> that need to be found, but this is somewhat rare).</p>
<p>As an example, when <code>crt5()</code> was created we also captured the <code>constant</code> dependency object in the function’s environment. Since furrr serializes <code>.f</code> alongside its environment, the dependencies come along for free without the need to auto detect them.</p>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="va">crt5</span>
<span class="co">#&gt; &lt;crate&gt; 10.1 kB</span>
<span class="co">#&gt; * function: 9.53 kB</span>
<span class="co">#&gt; * `constant`: 56 B</span>
<span class="co">#&gt; function(x) {</span>
<span class="co">#&gt;     x + constant</span>
<span class="co">#&gt;   }</span></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit">
<span class="fu">plan</span><span class="op">(</span><span class="va">multisession</span>, workers <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>

<span class="va">opts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/furrr_options.html">furrr_options</a></span><span class="op">(</span>globals <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">11</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span>

<span class="fu"><a href="../../reference/future_map.html">future_map</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">crt5</span>, .options <span class="op">=</span> <span class="va">opts</span><span class="op">)</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt;  [1]  2.67  3.67  4.67  5.67  6.67  7.67  8.67  9.67 10.67 11.67</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt;  [1] 12.67 13.67 14.67 15.67 16.67 17.67 18.67 19.67 20.67 21.67</span></pre></div>
<p>If you crate a function with extra optional arguments, you can still pass those through using furrr:</p>
<div class="sourceCode" id="cb13"><pre class="downlit">
<span class="va">median_doubled</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/carrier/man/crate.html">crate</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">na.rm</span> <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="va">na.rm</span><span class="op">)</span> <span class="op">*</span> <span class="fl">2</span>
<span class="op">}</span><span class="op">)</span></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit">
<span class="fu">plan</span><span class="op">(</span><span class="va">multisession</span>, workers <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>

<span class="va">opts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/furrr_options.html">furrr_options</a></span><span class="op">(</span>globals <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">5</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="../../reference/future_map.html">future_map_dbl</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">median_doubled</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span>, .options <span class="op">=</span> <span class="va">opts</span><span class="op">)</span>
<span class="co">#&gt; [1] 3 9</span></pre></div>
<p>Crates are also a great way to avoid accidentally shipping unneeded dependencies. In the <em>Common Gotchas</em> article, we discuss the following example of accidentally shipping this <code>big</code> object to each worker, even though it isn’t required by the function itself. This function call should be extremely fast, but is significantly slower than expected because it has to serialize <code>big</code>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit">
<span class="va">my_slow_fn</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span>
  <span class="co"># Massive object - but we don't want it in `.f`</span>
  <span class="va">big</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1e8</span> <span class="op">+</span> <span class="fl">0L</span>
  
  <span class="fu"><a href="../../reference/future_map.html">future_map_int</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">~</span><span class="va">.x</span><span class="op">)</span>
<span class="op">}</span></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit">
<span class="fu">plan</span><span class="op">(</span><span class="va">multisession</span>, workers <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/system.time.html">system.time</a></span><span class="op">(</span><span class="op">{</span>
  <span class="fu">my_slow_fn</span><span class="op">(</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>
<span class="co">#&gt;    user  system elapsed </span>
<span class="co">#&gt;   7.540   2.715  16.167</span></pre></div>
<p>One way to avoid this is to use carrier to crate the function, isolating it from the surrounding environment.</p>
<div class="sourceCode" id="cb17"><pre class="downlit">
<span class="va">my_crated_fn</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span>
  <span class="co"># Massive object - but we don't want it in `.f`</span>
  <span class="va">big</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1e8</span> <span class="op">+</span> <span class="fl">0L</span>
  
  <span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/carrier/man/crate.html">crate</a></span><span class="op">(</span><span class="op">~</span><span class="va">.x</span><span class="op">)</span>
  <span class="va">opts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/furrr_options.html">furrr_options</a></span><span class="op">(</span>globals <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
  
  <span class="fu"><a href="../../reference/future_map.html">future_map_int</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="va">fn</span>, .options <span class="op">=</span> <span class="va">opts</span><span class="op">)</span>
<span class="op">}</span></pre></div>
<div class="sourceCode" id="cb18"><pre class="downlit">
<span class="fu">plan</span><span class="op">(</span><span class="va">multisession</span>, workers <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/system.time.html">system.time</a></span><span class="op">(</span><span class="op">{</span>
  <span class="fu">my_crated_fn</span><span class="op">(</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>
<span class="co">#&gt;    user  system elapsed </span>
<span class="co">#&gt;   1.575   1.678   3.910</span></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Davis Vaughan, Matt Dancho.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
