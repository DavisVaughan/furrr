<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Map over multiple inputs simultaneously via futures — future_map2 • furrr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Map over multiple inputs simultaneously via futures — future_map2"><meta property="og:description" content='These functions work exactly the same as purrr::map2() and its variants,
but allow you to map in parallel. Note that "parallel" as described in purrr
is just saying that you are working with multiple inputs, and parallel in
this case means that you can work on multiple inputs and process them all in
parallel as well.'><meta property="og:image" content="https://furrr.futureverse.org/logo.png"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">furrr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.2.3.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/carrier.html">Alternative to automatic globals detection</a>
    </li>
    <li>
      <a href="../articles/chunking.html">Chunking input</a>
    </li>
    <li>
      <a href="../articles/gotchas.html">Common gotchas</a>
    </li>
    <li>
      <a href="../articles/progress.html">Progress notifications with progressr</a>
    </li>
    <li>
      <a href="../articles/remote-connections.html">Remote connections</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/DavisVaughan/furrr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Map over multiple inputs simultaneously via futures</h1>
    <small class="dont-index">Source: <a href="https://github.com/DavisVaughan/furrr/blob/HEAD/R/future-map2.R" class="external-link"><code>R/future-map2.R</code></a>, <a href="https://github.com/DavisVaughan/furrr/blob/HEAD/R/future-pmap.R" class="external-link"><code>R/future-pmap.R</code></a>, <a href="https://github.com/DavisVaughan/furrr/blob/HEAD/R/future-walk.R" class="external-link"><code>R/future-walk.R</code></a></small>
    <div class="hidden name"><code>future_map2.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>These functions work exactly the same as <code><a href="https://purrr.tidyverse.org/reference/map2.html" class="external-link">purrr::map2()</a></code> and its variants,
but allow you to map in parallel. Note that "parallel" as described in purrr
is just saying that you are working with multiple inputs, and parallel in
this case means that you can work on multiple inputs and process them all in
parallel as well.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">future_map2</span><span class="op">(</span>
  <span class="va">.x</span>,
  <span class="va">.y</span>,
  <span class="va">.f</span>,
  <span class="va">...</span>,
  .options <span class="op">=</span> <span class="fu"><a href="furrr_options.html">furrr_options</a></span><span class="op">(</span><span class="op">)</span>,
  .env_globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,
  .progress <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="fu">future_map2_chr</span><span class="op">(</span>
  <span class="va">.x</span>,
  <span class="va">.y</span>,
  <span class="va">.f</span>,
  <span class="va">...</span>,
  .options <span class="op">=</span> <span class="fu"><a href="furrr_options.html">furrr_options</a></span><span class="op">(</span><span class="op">)</span>,
  .env_globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,
  .progress <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="fu">future_map2_dbl</span><span class="op">(</span>
  <span class="va">.x</span>,
  <span class="va">.y</span>,
  <span class="va">.f</span>,
  <span class="va">...</span>,
  .options <span class="op">=</span> <span class="fu"><a href="furrr_options.html">furrr_options</a></span><span class="op">(</span><span class="op">)</span>,
  .env_globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,
  .progress <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="fu">future_map2_int</span><span class="op">(</span>
  <span class="va">.x</span>,
  <span class="va">.y</span>,
  <span class="va">.f</span>,
  <span class="va">...</span>,
  .options <span class="op">=</span> <span class="fu"><a href="furrr_options.html">furrr_options</a></span><span class="op">(</span><span class="op">)</span>,
  .env_globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,
  .progress <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="fu">future_map2_lgl</span><span class="op">(</span>
  <span class="va">.x</span>,
  <span class="va">.y</span>,
  <span class="va">.f</span>,
  <span class="va">...</span>,
  .options <span class="op">=</span> <span class="fu"><a href="furrr_options.html">furrr_options</a></span><span class="op">(</span><span class="op">)</span>,
  .env_globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,
  .progress <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="fu">future_map2_raw</span><span class="op">(</span>
  <span class="va">.x</span>,
  <span class="va">.y</span>,
  <span class="va">.f</span>,
  <span class="va">...</span>,
  .options <span class="op">=</span> <span class="fu"><a href="furrr_options.html">furrr_options</a></span><span class="op">(</span><span class="op">)</span>,
  .env_globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,
  .progress <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="fu">future_map2_dfr</span><span class="op">(</span>
  <span class="va">.x</span>,
  <span class="va">.y</span>,
  <span class="va">.f</span>,
  <span class="va">...</span>,
  .id <span class="op">=</span> <span class="cn">NULL</span>,
  .options <span class="op">=</span> <span class="fu"><a href="furrr_options.html">furrr_options</a></span><span class="op">(</span><span class="op">)</span>,
  .env_globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,
  .progress <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="fu">future_map2_dfc</span><span class="op">(</span>
  <span class="va">.x</span>,
  <span class="va">.y</span>,
  <span class="va">.f</span>,
  <span class="va">...</span>,
  .options <span class="op">=</span> <span class="fu"><a href="furrr_options.html">furrr_options</a></span><span class="op">(</span><span class="op">)</span>,
  .env_globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,
  .progress <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="fu">future_pmap</span><span class="op">(</span>
  <span class="va">.l</span>,
  <span class="va">.f</span>,
  <span class="va">...</span>,
  .options <span class="op">=</span> <span class="fu"><a href="furrr_options.html">furrr_options</a></span><span class="op">(</span><span class="op">)</span>,
  .env_globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,
  .progress <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="fu">future_pmap_chr</span><span class="op">(</span>
  <span class="va">.l</span>,
  <span class="va">.f</span>,
  <span class="va">...</span>,
  .options <span class="op">=</span> <span class="fu"><a href="furrr_options.html">furrr_options</a></span><span class="op">(</span><span class="op">)</span>,
  .env_globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,
  .progress <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="fu">future_pmap_dbl</span><span class="op">(</span>
  <span class="va">.l</span>,
  <span class="va">.f</span>,
  <span class="va">...</span>,
  .options <span class="op">=</span> <span class="fu"><a href="furrr_options.html">furrr_options</a></span><span class="op">(</span><span class="op">)</span>,
  .env_globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,
  .progress <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="fu">future_pmap_int</span><span class="op">(</span>
  <span class="va">.l</span>,
  <span class="va">.f</span>,
  <span class="va">...</span>,
  .options <span class="op">=</span> <span class="fu"><a href="furrr_options.html">furrr_options</a></span><span class="op">(</span><span class="op">)</span>,
  .env_globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,
  .progress <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="fu">future_pmap_lgl</span><span class="op">(</span>
  <span class="va">.l</span>,
  <span class="va">.f</span>,
  <span class="va">...</span>,
  .options <span class="op">=</span> <span class="fu"><a href="furrr_options.html">furrr_options</a></span><span class="op">(</span><span class="op">)</span>,
  .env_globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,
  .progress <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="fu">future_pmap_raw</span><span class="op">(</span>
  <span class="va">.l</span>,
  <span class="va">.f</span>,
  <span class="va">...</span>,
  .options <span class="op">=</span> <span class="fu"><a href="furrr_options.html">furrr_options</a></span><span class="op">(</span><span class="op">)</span>,
  .env_globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,
  .progress <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="fu">future_pmap_dfr</span><span class="op">(</span>
  <span class="va">.l</span>,
  <span class="va">.f</span>,
  <span class="va">...</span>,
  .id <span class="op">=</span> <span class="cn">NULL</span>,
  .options <span class="op">=</span> <span class="fu"><a href="furrr_options.html">furrr_options</a></span><span class="op">(</span><span class="op">)</span>,
  .env_globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,
  .progress <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="fu">future_pmap_dfc</span><span class="op">(</span>
  <span class="va">.l</span>,
  <span class="va">.f</span>,
  <span class="va">...</span>,
  .options <span class="op">=</span> <span class="fu"><a href="furrr_options.html">furrr_options</a></span><span class="op">(</span><span class="op">)</span>,
  .env_globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,
  .progress <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="fu">future_walk2</span><span class="op">(</span>
  <span class="va">.x</span>,
  <span class="va">.y</span>,
  <span class="va">.f</span>,
  <span class="va">...</span>,
  .options <span class="op">=</span> <span class="fu"><a href="furrr_options.html">furrr_options</a></span><span class="op">(</span><span class="op">)</span>,
  .env_globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,
  .progress <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="fu">future_pwalk</span><span class="op">(</span>
  <span class="va">.l</span>,
  <span class="va">.f</span>,
  <span class="va">...</span>,
  .options <span class="op">=</span> <span class="fu"><a href="furrr_options.html">furrr_options</a></span><span class="op">(</span><span class="op">)</span>,
  .env_globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,
  .progress <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>.x</dt>
<dd><p>Vectors of the same length. A vector of length 1 will
be recycled.</p></dd>
<dt>.y</dt>
<dd><p>Vectors of the same length. A vector of length 1 will
be recycled.</p></dd>
<dt>.f</dt>
<dd><p>A function, formula, or vector (not necessarily atomic).</p>
<p>If a <strong>function</strong>, it is used as is.</p>
<p>If a <strong>formula</strong>, e.g. <code>~ .x + 2</code>, it is converted to a function. There
are three ways to refer to the arguments:</p><ul><li><p>For a single argument function, use <code>.</code></p></li>
<li><p>For a two argument function, use <code>.x</code> and <code>.y</code></p></li>
<li><p>For more arguments, use <code>..1</code>, <code>..2</code>, <code>..3</code> etc</p></li>
</ul><p>This syntax allows you to create very compact anonymous functions.</p>
<p>If <strong>character vector</strong>, <strong>numeric vector</strong>, or <strong>list</strong>, it is
converted to an extractor function. Character vectors index by
name and numeric vectors index by position; use a list to index
by position and name at different levels. If a component is not
present, the value of <code>.default</code> will be returned.</p></dd>
<dt>...</dt>
<dd><p>Additional arguments passed on to the mapped function.</p></dd>
<dt>.options</dt>
<dd><p>The <code>future</code> specific options to use with the workers. This
must be the result from a call to <code><a href="furrr_options.html">furrr_options()</a></code>.</p></dd>
<dt>.env_globals</dt>
<dd><p>The environment to look for globals required by <code>.x</code> and
<code>...</code>. Globals required by <code>.f</code> are looked up in the function environment
of <code>.f</code>.</p></dd>
<dt>.progress</dt>
<dd><p>A single logical. Should a progress bar be displayed?
Only works with multisession, multicore, and multiprocess futures. Note
that if a multicore/multisession future falls back to sequential, then
a progress bar will not be displayed.</p>
<p><strong>Warning:</strong> The <code>.progress</code> argument will be deprecated and removed
in a future version of furrr in favor of using the more robust
<a href="https://CRAN.R-project.org/package=progressr" class="external-link">progressr</a>
package.</p></dd>
<dt>.id</dt>
<dd><p>Either a string or <code>NULL</code>. If a string, the output will contain
a variable with that name, storing either the name (if <code>.x</code> is named) or
the index (if <code>.x</code> is unnamed) of the input. If <code>NULL</code>, the default, no
variable will be created.</p>
<p>Only applies to <code>_dfr</code> variant.</p></dd>
<dt>.l</dt>
<dd><p>A list of vectors, such as a data frame. The length of <code>.l</code>
determines the number of arguments that <code>.f</code> will be called with. List
names will be used if present.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>An atomic vector, list, or data frame, depending on the suffix.
Atomic vectors and lists will be named if <code>.x</code> or the first element of <code>.l</code>is named.
If all input is length 0, the output will be length 0. If any input is
length 1, it will be recycled to the length of the longest.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">multisession</span>, workers <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">100</span><span class="op">)</span></span>
<span class="r-in"><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span>
<span class="r-in"><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">50</span>, <span class="fl">500</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">future_map2</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="op">~</span> <span class="va">.x</span> <span class="op">+</span> <span class="va">.y</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 103</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Split into pieces, fit model to each piece, then predict</span></span>
<span class="r-in"><span class="va">by_cyl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/split.html" class="external-link">split</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span><span class="op">)</span></span>
<span class="r-in"><span class="va">mods</span> <span class="op">&lt;-</span> <span class="fu"><a href="future_map.html">future_map</a></span><span class="op">(</span><span class="va">by_cyl</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">wt</span>, data <span class="op">=</span> <span class="va">.</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">future_map2</span><span class="op">(</span><span class="va">mods</span>, <span class="va">by_cyl</span>, <span class="va">predict</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`4`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Datsun 710      Merc 240D       Merc 230       Fiat 128    Honda Civic </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       26.47010       21.55719       21.78307       27.14774       30.45125 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corolla  Toyota Corona      Fiat X1-9  Porsche 914-2   Lotus Europa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       29.20890       25.65128       28.64420       27.48656       31.02725 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Volvo 142E </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       23.87247 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`6`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Mazda RX4  Mazda RX4 Wag Hornet 4 Drive        Valiant       Merc 280 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       21.12497       20.41604       19.47080       18.78968       18.84528 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Merc 280C   Ferrari Dino </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       18.84528       20.70795 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`8`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Hornet Sportabout          Duster 360          Merc 450SE          Merc 450SL </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            16.32604            16.04103            14.94481            15.69024 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Merc 450SLC  Cadillac Fleetwood Lincoln Continental   Chrysler Imperial </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            15.58061            12.35773            11.97625            12.14945 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Dodge Challenger         AMC Javelin          Camaro Z28    Pontiac Firebird </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            16.15065            16.33700            15.44907            15.43811 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Ford Pantera L       Maserati Bora </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            16.91800            16.04103 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">future_pmap</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">z</span><span class="op">)</span>, <span class="va">sum</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 62</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 603</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Matching arguments by position</span></span>
<span class="r-in"><span class="fu">future_pmap</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">z</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span> ,<span class="va">c</span><span class="op">)</span> <span class="va">a</span> <span class="op">/</span> <span class="op">(</span><span class="va">b</span> <span class="op">+</span> <span class="va">c</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.1666667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.1923077</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.1988072</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Vectorizing a function over multiple arguments</span></span>
<span class="r-in"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span class="r-in">  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"apple"</span>, <span class="st">"banana"</span>, <span class="st">"cherry"</span><span class="op">)</span>,</span>
<span class="r-in">  pattern <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p"</span>, <span class="st">"n"</span>, <span class="st">"h"</span><span class="op">)</span>,</span>
<span class="r-in">  replacement <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"f"</span>, <span class="st">"q"</span><span class="op">)</span>,</span>
<span class="r-in">  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">future_pmap</span><span class="op">(</span><span class="va">df</span>, <span class="va">gsub</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "axxle"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "bafafa"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "cqerry"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span class="fu">future_pmap_chr</span><span class="op">(</span><span class="va">df</span>, <span class="va">gsub</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "axxle"  "bafafa" "cqerry"</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># \dontshow{</span></span>
<span class="r-in"><span class="co"># Close open connections for R CMD Check</span></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">inherits</a></span><span class="op">(</span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"sequential"</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">sequential</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># }</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Davis Vaughan, Matt Dancho.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

